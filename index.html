<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <title>Innflux - World's First Composable Credit Layer</title>
    <link rel="stylesheet" href="style.css" />
    <script>
      function openModal() {
        const modal = document.getElementById('earlyAccessModal');
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
        // Clear form when opening from header button
        document.getElementById('earlyAccessForm').reset();
      }
      
      function openModalFromCTA() {
        const modal = document.getElementById('earlyAccessModal');
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
        
        // Get email from CTA input if exists
        const ctaEmailInput = document.querySelector('.cta-email-input');
        if (ctaEmailInput && ctaEmailInput.value) {
          document.getElementById('email').value = ctaEmailInput.value;
        }
      }
      
      function closeModal() {
        const modal = document.getElementById('earlyAccessModal');
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
      }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.7/dist/umd/supabase.min.js"></script>
  </head>
  <body>
    <header class="header">
      <div class="container">
        <div class="logo">
          <img class="logo-icon" src="https://c.animaapp.com/b3FISGYA/img/icon-1@2x.png" alt="Innflux logo" />
          <h1 class="logo-text">Innflux</h1>
        </div>
        <button class="cta-button" onclick="openModal()">Get Early Access</button>
      </div>
    </header>

    <main>
      <section class="hero">
        <div class="gradient-follow"></div>
          <div class="hero-content">
            <h2 class="hero-title">Unsecured Institutional Lending</h2>
            <p class="hero-subtitle">Powered by DeFi</p>
          <p class="hero-description">Innflux is the world's first composable credit layer. Supply, borrow, and unlock institutional liquidity.</p>
            <div class="cards-container">
              <div class="card">
              <div class="card-content">
                <img src="https://c.animaapp.com/b3FISGYA/img/icon-1@2x.png" alt="Innflux logo" class="card-logo">
                <h3>Automated Risk Engine</h3>
                <p class="card-text">One unified risk score to credit risk businesses utilising all available on-chain and off-chain indicators.</p>
              </div>
              </div>
              <div class="card">
              <div class="card-content">
                <img src="https://c.animaapp.com/b3FISGYA/img/icon-1@2x.png" alt="Innflux logo" class="card-logo">
                <h3>Composable Collateral</h3>
                <p class="card-text">Deposit USDT or Staked AMM LP positions as collateral. RWA yield without unwinding AMM positions.</p>
              </div>
              </div>
              <div class="card">
              <div class="card-content">
                <img src="https://c.animaapp.com/b3FISGYA/img/icon-1@2x.png" alt="Innflux logo" class="card-logo">
                <h3>Permissionless Lending</h3>
                <p class="card-text">Unlocking retail Defi liquidity for TradeFi credit lines.</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="how-it-works">
        <div class="container">
          <div class="how-it-works-header">
            <h2 class="section-title">How it Works</h2>
              </div>
          
          <div class="how-it-works-content">
            <!-- Left side: Sticky text content -->
            <div class="steps-text-container">
              <div class="steps-text-content">
                <div class="step-item" data-step="1">
                  <div class="step-number">01</div>
                  <div class="step-content">
                <h3>Deposit USDT or LP NFT</h3>
                <p>Earn yield by depositing USDT or LP NFT into our protocol. Your deposits are secured by smart contracts and can be withdrawn anytime. Each deposit is carefully managed with real-time risk assessment and automated yield optimization.</p>
              </div>
                </div>
                
                <div class="step-item" data-step="2">
                  <div class="step-number">02</div>
                  <div class="step-content">
                <h3>Finance Invoice data ZKTLS</h3>
                <p>Through our Financial Data ZKTLS system and credit line processing, enterprises can access credit lines while maintaining privacy and security.</p>
              </div>
                </div>
                
                <div class="step-item" data-step="3">
                  <div class="step-number">03</div>
                  <div class="step-content">
                <h3>Credit Line to Customer</h3>
                <p>Qualified customers receive instant credit lines based on their invoice data and risk assessment. Our protocol automatically manages credit distribution, repayment tracking, and yield distribution to depositors.</p>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Right side: Visualization -->
            <div class="steps-visualization">
              <div class="flow-diagram-container">
                <img src="./structure1.png" alt="Innflux Protocol Flow Step 1" class="flow-diagram active" data-step="1" />
                <img src="./structure2.png" alt="Innflux Protocol Flow Step 2" class="flow-diagram" data-step="2" />
                <img src="./structure3.png" alt="Innflux Protocol Flow Step 3" class="flow-diagram" data-step="3" />
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Spacer to push content below fixed How It Works section -->
      <div class="how-it-works-spacer"></div>

      <section class="section problem-statement">
        <div class="container">
          <div class="title-container">
            <h2 class="section-title">What We're Building</h2>
          </div>
          <div class="content-container">
            <div class="description">
              <p>Current DeFi solutions cover mostly restrictive collateralised capital limited to other crypto-assets.</p>
              <p>Innflux is bridging this gap to turn institutional real-time trade flows into credit lines.</p>
              <p>Innflux is the first credit layer to recycle idle DEX liquidity into risk adjusted trade-finance lines for emerging-market SMEs—combining real-time on-chain risk scoring with off-chain invoice, bank and bureau data.</p>
              <p>Innflux is solving the multi-trillion dollar institutional credit gap in frontier markets.</p>
              <p>Stablecoins have already solved a medium of exchange problem for cross-border settlements.</p>
              <p>Yet, credit access to enterprises is still gate-kept via private lenders.</p>
              <p>Traditional banks price cross-border credit risk conservatively in emerging markets sticking to outdated frameworks that omit on-chain activity and stable coin usage.</p>
              <p>This reliance on outdated risk frameworks renders them unable to provide appropriate credit to growing enterprises.</p>
            </div>
          </div>
        </div>
      </section>

      <section class="section solution">
        <div class="container">
          <div class="features">
            <div class="feature-column">
              <h3 class="feature-title">Borrowing</h3>
              <p class="feature-description">Uncollateralised Institutional Credit in minutes.</p>
              <ul class="feature-list">
                <li class="feature-item">
                  <div class="feature-item-content">
                    <div class="feature-item-text">
                      Credit lines
                      <div class="feature-item-details">
                        $250k–$10M with dynamic quotes.
                      </div>
                    </div>
                  </div>
                </li>
                <li class="feature-item">
                  <div class="feature-item-content">
                    <div class="feature-item-text">
                      Hybrid scoring
                      <div class="feature-item-details">
                        on-chain cash-flow + off-chain bureaus + custom weights. <br>Powered by FluxScore.
                      </div>
                    </div>
                  </div>
                </li>
                <li class="feature-item">
                  <div class="feature-item-content">
                    <div class="feature-item-text">
                      No crypto collateral
                      <div class="feature-item-details">
                        Trade history backed lines.
                      </div>
                    </div>
                  </div>
                </li>
                <li class="feature-item">
                  <div class="feature-item-content">
                    <div class="feature-item-text">
                      Built in fiat ramps
                      <div class="feature-item-details">
                        bridge secured credit lines to fiat instantly.
                      </div>
                    </div>
                  </div>
                </li>
                <li class="feature-item">
                  <div class="feature-item-content">
                    <div class="feature-item-text">
                      Fully Compliant
                      <div class="feature-item-details">
                        Innflux monitors all lender wallets for AML, FATCA compliance checks.
                      </div>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
            <div class="feature-column">
              <h3 class="feature-title">Lending</h3>
              <p class="feature-description">Lend Anything. Earn Real-World USDC Yield.</p>
              <ul class="feature-list">
                <li class="feature-item">
                  <div class="feature-item-content">
                    <div class="feature-item-text">
                      Plug in any asset
                      <div class="feature-item-details">
                        stablecoins, out-of-range Uni V3 LP ERC 721's.
                      </div>
                    </div>
                  </div>
                </li>
                <li class="feature-item">
                  <div class="feature-item-content">
                    <div class="feature-item-text">
                      DeFi composability
                      <div class="feature-item-details">
                        Get composable tokens in exchange for liquidity and wrap your receipt token to farm, leverage, or restake elsewhere.
                      </div>
                    </div>
                  </div>
                </li>
                <li class="feature-item">
                  <div class="feature-item-content">
                    <div class="feature-item-text">
                      Instant exits
                      <div class="feature-item-details">
                        withdraw any time with zero lock-ups.
                      </div>
                    </div>
                  </div>
                </li>
                <li class="feature-item">
                  <div class="feature-item-content">
                    <div class="feature-item-text">
                      Transparent risk
                      <div class="feature-item-details">
                        see borrower score and payment streams onchain.
                      </div>
                    </div>
                  </div>
                </li>
                <li class="feature-item">
                  <div class="feature-item-content">
                    <div class="feature-item-text">
                      Best risk adjusted returns
                      <div class="feature-item-details">
                        Insurance layer buys bad debt in case of any delays.
                      </div>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <section class="section faq">
        <div class="container">
          <div class="faq-content">
            <h2 class="faq-title">Secure.<br>Onchain.</h2>
            <p class="faq-description">
              Lenders enjoy defi's composability with treasury backed risk covers. Enjoy best in class yields on
              stablecoins. Withdraw anytime.
            </p>
          </div>
          <div class="faq-list">
            <div class="faq-item">
              <h3 class="faq-question">What is Innflux?</h3>
              <div class="faq-answer">
                Innflux is an on-chain working-capital engine purpose-built for cross border businesses such as energy, FMCG, and commodities in Asia, Africa, and Latin America. It incorporates stable-coin rails for B2B payments, shortening cross-border settlement from weeks to hours and securing customers against forex risks for delayed remittances. Innflux credit scores enterprises with it's internal risk scoring engine to issue credit lines to finance invoices for healthy businesses stuck with slow payment
              </div>
            </div>
            <div class="faq-item">
              <h3 class="faq-question">Are there withdrawal limits?</h3>
              <div class="faq-answer">
                No withdrawal limits. You maintain full control over your funds and can withdraw any amount at any time through our interface or directly from smart contracts.
              </div>
            </div>
            <div class="faq-item">
              <h3 class="faq-question">How are funds protected?</h3>
              <div class="faq-answer">
                All funds are held in smart contracts with multi-sig requirements. Some funds are backed by local guarantors based on our premier internal credit score risk system to finance short-term liquidity. Innflux over-collateralizes real world assets to minimize counter-party risks. All funds are managed in an asynchronous vault which manages float and time-drip based isolated position ERC4626 vaults. These vaults are created with escrowed offchain capital based on internal credit risk scoring engines with instant payouts to lenders and are fully insured by Innflux's treasury fund. Users can withdraw
              </div>
            </div>
            <div class="faq-item">
              <h3 class="faq-question">How do you verify invoice authenticity?</h3>
              <div class="faq-answer">
                We use a combination of blockchain oracles, ERP integrations, and machine learning to verify invoice authenticity and creditworthiness in real-time. Each invoice is backed by either a healthy risk credit score with either deposit based overcollateral debt or a rich client KYB's entity history and are called via a verification
              </div>
            </div>
            <div class="faq-item">
              <h3 class="faq-question">What about regulatory?</h3>
              <div class="faq-answer">
                Innflux operates under applicable financial regulations with proper licensing. All transactions are transparent and auditable on-chain for regulatory compliance. All debtors are fully KYB'd via globally recognised verification providers like Sumsub and are fully FATCA and AML compliant. Innflux also leverages tools like chainalysis that leverage on-chain intelligence to screen wallet addresses to identify and respond to potential risks and ensure compliance with
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="cta">
        <div class="container">
          <h2 class="cta-title">Unlock <br />Early Access</h2>
          <div class="cta-content">
            <p class="cta-description">
              Be part of the first wave to experience payment finance on-chain. Deploy stablecoins into short-term
              trade deals with real-world backing and risk protection.
            </p>
            <button class="cta-btn" onclick="openModalFromCTA()">Early Access</button>
          </div>
        </div>
      </section>

      <!-- Modal Form -->
      <div id="earlyAccessModal" class="modal">
        <div class="modal-content">
          <span class="close-modal" onclick="closeModal()">&times;</span>
          <h2>Request Early Access</h2>
          <form id="earlyAccessForm" class="early-access-form">
            <div class="form-group">
              <input type="text" id="name" placeholder="Name" required>
            </div>
            <div class="form-group contact-group">
              <input type="email" id="email" placeholder="Email" class="contact-input">
            </div>
            <div class="form-group contact-group">
              <input type="text" id="telegram" placeholder="Telegram Username" class="contact-input">
            </div>
            <div class="form-group contact-group">
              <input type="text" id="x" placeholder="X (Twitter) Username" class="contact-input">
            </div>
            <div class="form-group">
              <textarea id="message" placeholder="Are you interested to be a lender or borrower on innflux?" rows="4" required></textarea>
            </div>
            <button type="submit" class="submit-btn">Submit Request</button>
          </form>
        </div>
      </div>

      <script>
        document.addEventListener('DOMContentLoaded', function() {
          // Header scroll behavior
          const headerScroll = {
            lastY: window.scrollY,
            lastTime: Date.now(),
            header: document.querySelector('.header'),
            threshold: 50,
            timeout: 150,
            ticking: false,

            handleScroll() {
              const currentY = window.scrollY;
              const currentTime = Date.now();
              const timeDiff = currentTime - this.lastTime;
              
              if (timeDiff > this.timeout) {
                if (currentY > this.lastY && currentY > this.threshold) {
                  this.header.classList.add('hidden');
                } else {
                  this.header.classList.remove('hidden');
                }
                this.lastTime = currentTime;
              }
              this.lastY = currentY;
            },

            init() {
              window.addEventListener('scroll', () => {
                if (!this.ticking) {
                  window.requestAnimationFrame(() => {
                    this.handleScroll();
                    this.ticking = false;
                  });
                  this.ticking = true;
                }
              });
            }
          };

          // Initialize header scroll behavior
          headerScroll.init();

          // 1. Supabase 클라이언트 생성
          const supabaseUrl = 'https://kdxjkolsyofpxalcrxwg.supabase.co'; // 본인 프로젝트 URL로 변경
          const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtkeGprb2xzeW9mcHhhbGNyeHdnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMwNzg5NzMsImV4cCI6MjA2ODY1NDk3M30.Kdtp2iZZuzjcqxdodJ4VCDNvgcIMWRSoUWFcc6SYTlw'; // 본인 anon public key로 변경
          const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

          // 2. 폼 제출 이벤트에 Supabase 연동 추가
          document.getElementById('earlyAccessForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            // 입력값 수집
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const telegram = document.getElementById('telegram').value;
            const xUsername = document.getElementById('x').value;
            const message = document.getElementById('message').value;

            if (!email && !telegram && !xUsername) {
              alert('Please provide at least one contact method (Email, Telegram, or X Username)');
              return;
            }

            // Supabase에 데이터 저장
            const { data, error } = await supabase
              .from('early_access')
              .insert([
                { name, email, telegram, x: xUsername, message }
              ]);

            if (error) {
              alert('저장에 실패했습니다: ' + error.message);
              return;
            }

            // 성공 시 토스트 알림
            const toast = document.getElementById('successToast');
            toast.classList.add('show');
            closeModal();
            e.target.reset();
            setTimeout(() => { toast.classList.remove('show'); }, 3000);
          });

          // Close modal when clicking outside
          window.addEventListener('click', function(event) {
            const modal = document.getElementById('earlyAccessModal');
            if (event.target === modal) {
              closeModal();
            }
          });

        // Handle FAQ interactions
        document.querySelectorAll('.faq-item').forEach(item => {
          item.addEventListener('click', () => {
            // Close all other items
            document.querySelectorAll('.faq-item').forEach(otherItem => {
              if (otherItem !== item) {
                otherItem.classList.remove('active');
              }
            });
            // Toggle current item
            item.classList.toggle('active');
          });
        });
        
        // Handle feature item interactions
        document.querySelectorAll('.feature-item').forEach(item => {
          item.addEventListener('mouseenter', () => {
            // Remove active class from all items
            document.querySelectorAll('.feature-item').forEach(i => {
              i.classList.remove('active');
            });
            // Add active class to current item
            item.classList.add('active');
          });
        });
        
        // Reset feature items when mouse leaves the feature column
        document.querySelectorAll('.feature-column').forEach(column => {
          column.addEventListener('mouseleave', () => {
            document.querySelectorAll('.feature-item').forEach(item => {
              item.classList.remove('active');
            });
          });
        });

        // Handle gradient following mouse movement
        const hero = document.querySelector('.hero');
        const gradient = document.querySelector('.gradient-follow');
        const cardsContainer = document.querySelector('.cards-container');
        
        let currentX = 0;
        let currentY = 0;
        let targetX = 0;
        let targetY = 0;

        // Linear interpolation function
        function lerp(start, end, factor) {
          return start + (end - start) * factor;
        }
        
        function updateGradientPosition(e) {
          const rect = hero.getBoundingClientRect();
          const cardsRect = cardsContainer.getBoundingClientRect();
          
          // Hide gradient if scrolled past half of the cards container
          if (cardsRect.bottom < window.innerHeight * 0.7) {
            gradient.style.opacity = '0';
            return;
          }
          
          targetX = e.clientX - rect.left;
          targetY = e.clientY - rect.top;
          
          if (!gradient.style.opacity || gradient.style.opacity === '0') {
            currentX = targetX;
            currentY = targetY;
            gradient.style.opacity = '1';
          }
        }
        
        function handleMouseLeave() {
          gradient.style.opacity = '0';
        }

        // Add scroll event listener
        window.addEventListener('scroll', () => {
          const cardsRect = cardsContainer.getBoundingClientRect();
          if (cardsRect.bottom < window.innerHeight * 0.7) {
            gradient.style.opacity = '0';
          } else if (cardsRect.top > 0) {
            gradient.style.opacity = '1';
          }
        });

        function animate() {
          if (gradient.style.opacity === '1') {
            // Smooth movement with lerp
            currentX = lerp(currentX, targetX, 0.1);
            currentY = lerp(currentY, targetY, 0.1);
            
            gradient.style.transform = `translate(${currentX}px, ${currentY}px) translate(-50%, -50%)`;
          }
          requestAnimationFrame(animate);
        }
        
        hero.addEventListener('mousemove', updateGradientPosition);
        hero.addEventListener('mouseleave', handleMouseLeave);
        
        // Start the animation loop
        animate();

          // Handle How It Works section scroll animations
          const howItWorksSection = document.querySelector('.how-it-works');
          const stepItems = document.querySelectorAll('.step-item');
          const flowDiagrams = document.querySelectorAll('.flow-diagram');
          
          // Throttling variables for smoother animations
          let animationTimeout;
          let lastScrollTime = 0;
          const animationDelay = 50; // Reduced delay for more responsive animations
          
          function updateStepAnimations() {
            if (!howItWorksSection) return;
            
            const currentTime = Date.now();
            
            // Throttle the animation updates
            if (currentTime - lastScrollTime < animationDelay) {
              clearTimeout(animationTimeout);
              animationTimeout = setTimeout(() => {
                updateStepAnimations();
              }, animationDelay - (currentTime - lastScrollTime));
              return;
            }
            
            lastScrollTime = currentTime;
            
            // Use viewport-based detection instead of scroll position
            const windowHeight = window.innerHeight;
            const stepItems = document.querySelectorAll('.step-item');
            let activeStepIndex = 0;
            
            // Check each step's position relative to viewport
            stepItems.forEach((item, index) => {
              const rect = item.getBoundingClientRect();
              const itemTop = rect.top;
              const itemBottom = rect.bottom;
              const itemHeight = rect.height;
              
              // Calculate when step should be active (when it's in the middle part of viewport)
              const triggerPoint = windowHeight * 0.4; // 40% down the viewport for earlier activation
              
              if (itemTop <= triggerPoint && itemBottom >= triggerPoint) {
                activeStepIndex = index;
              }
            });
            
            // Ensure activeStepIndex is within bounds
            activeStepIndex = Math.max(0, Math.min(stepItems.length - 1, activeStepIndex));
            
            // Debug logging
            console.log('Active Step:', activeStepIndex);
            
            // Update step items with progressive reveal
            stepItems.forEach((item, index) => {
              // Remove all classes first
              item.classList.remove('active', 'collapsed', 'revealed');
              
              if (index < activeStepIndex) {
                // Previous steps: show title but collapse description
                item.classList.add('revealed');
              } else if (index === activeStepIndex) {
                // Current active step: show full content
                item.classList.add('active');
              } else {
                // Future steps: show but inactive
                item.classList.add('revealed');
              }
            });
            
            // Update flow diagrams with smooth transitions
            flowDiagrams.forEach((diagram, index) => {
              diagram.classList.remove('active');
              if (index === activeStepIndex) {
                diagram.classList.add('active');
              }
            });
          }
          
          // Initialize first step as active and show all steps initially
          if (stepItems.length > 0) {
            stepItems[0].classList.add('active');
            flowDiagrams[0].classList.add('active');
            
            // Show all steps initially but only first one active
            for (let i = 1; i < stepItems.length; i++) {
              stepItems[i].classList.add('revealed');
            }
          }
          
          // Add scroll event listener with throttling
          window.addEventListener('scroll', () => {
            // Handle step animations immediately
            updateStepAnimations();
          });
          
          // Update on initial load
          updateStepAnimations();

        // Handle terms agreement
        const termsCheckbox = document.querySelector('.checkbox-container input');
        const proceedButton = document.querySelector('.proceed-btn');

        termsCheckbox.addEventListener('change', (e) => {
          proceedButton.disabled = !e.target.checked;
        });

        // Initialize proceed button state
        proceedButton.disabled = true;

          // Add validation for contact methods
          const contactInputs = document.querySelectorAll('.contact-input');
          contactInputs.forEach(input => {
            input.addEventListener('input', function() {
              const hasValue = Array.from(contactInputs).some(input => input.value.trim() !== '');
              contactInputs.forEach(input => {
                input.required = !hasValue;
              });
            });
          });
        });
      </script>
    </main>

    <footer class="footer">
      <div class="container">
        <h2 class="footer-title">Credit Expansion across TradFi and DeFi starts here.</h2>
        <div class="footer-content">
          <div class="footer-logo">
            <img class="footer-logo-icon" src="https://c.animaapp.com/b3FISGYA/img/icon@2x.png" alt="Innflux logo" />
            <span class="footer-logo-text">Innflux</span>
          </div>
          <nav class="footer-nav">
            <a href="#">About</a>
            <a href="#">Contact</a>
            <a href="#">Privacy Policy</a>
            <a href="#">Cookie Policy</a>
          </nav>
          <div class="social-links">
            <a href="https://x.com/innflux_xyz" target="_blank">X</a>
            <a href="#">LinkedIn</a>
          </div>
        </div>
        <p class="copyright">© 2025 Innflux, Inc. All rights reserved.</p>
      </div>
    </footer>

    <div id="successToast" class="toast-notification">
      <span class="success-icon">✓</span>
      <span>Thank you for your interest! Your request has been submitted successfully.</span>
    </div>
  </body>
</html>
